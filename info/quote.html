<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get a Quote - Sky Shield</title>
    <link rel="icon" type="image/png" href="../skyshield-logo-clean.png">
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="quote-config.js"></script>
    <style>
        /* Quote Page Styles */
        .quote-hero {
            padding: 120px 0 60px;
            background: var(--primary);
            color: white;
            text-align: center;
        }
        
        .quote-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .quote-hero p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .quote-content {
            padding: 60px 0;
            background: var(--background-alt);
        }
        
        .quote-layout {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Input Sections */
        .quote-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .section-header i {
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        .section-header h3 {
            font-size: 1.2rem;
            color: var(--text-dark);
            margin: 0;
        }
        
        .section-header .badge {
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
        }
        
        .badge.required {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .badge.optional {
            background: #e0e7ff;
            color: #4338ca;
        }
        
        /* Form Elements */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .form-grid.three-col {
            grid-template-columns: 1fr 1fr 1fr;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            display: block;
            font-weight: 500;
            color: var(--text-dark);
            margin-bottom: 0.4rem;
            font-size: 0.9rem;
        }
        
        .form-group label .required-star {
            color: #dc2626;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-group .helper-text {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.3rem;
        }
        
        /* Site Size Options */
        .size-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .size-option {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        
        .size-option:hover {
            border-color: var(--primary);
        }
        
        .size-option.active {
            border-color: var(--primary);
            background: rgba(26, 39, 68, 0.05);
        }
        
        .size-option input {
            display: none;
        }
        
        .size-option .option-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.9rem;
        }
        
        .size-input-wrapper {
            display: none;
            margin-top: 1rem;
        }
        
        .size-input-wrapper.active {
            display: block;
        }
        
        /* Toggle Switches */
        .toggle-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .toggle-row:last-child {
            border-bottom: none;
        }
        
        .toggle-label {
            font-size: 0.9rem;
            color: var(--text-dark);
        }
        
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            border-radius: 24px;
            transition: 0.3s;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }
        
        input:checked + .toggle-slider {
            background: var(--primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }
        
        /* Estimate Panel */
        .estimate-panel {
            position: sticky;
            top: 100px;
        }
        
        .estimate-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .estimate-header {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .estimate-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .estimate-price {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .estimate-starting {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-style: italic;
        }
        
        /* Coverage Package */
        .coverage-package {
            background: var(--background-alt);
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        .coverage-package h4 {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
        }
        
        .coverage-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            font-size: 0.95rem;
        }
        
        .coverage-row .label {
            color: var(--text-muted);
        }
        
        .coverage-row .value {
            font-weight: 600;
            color: var(--text-dark);
        }
        
        /* Breakdown */
        .breakdown-section {
            margin-bottom: 1.5rem;
        }
        
        .breakdown-section h4 {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 0.6rem 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.9rem;
        }
        
        .breakdown-item:last-child {
            border-bottom: none;
        }
        
        .breakdown-item .label {
            color: var(--text-muted);
        }
        
        .breakdown-item .value {
            font-weight: 500;
            color: var(--text-dark);
        }
        
        .breakdown-item.total {
            border-top: 2px solid var(--primary);
            padding-top: 1rem;
            margin-top: 0.5rem;
        }
        
        .breakdown-item.total .label,
        .breakdown-item.total .value {
            font-weight: 700;
            color: var(--primary);
        }
        
        /* Included List */
        .included-section {
            background: #f0fdf4;
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        .included-section h4 {
            font-size: 0.85rem;
            color: #166534;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }
        
        .included-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .included-section li {
            font-size: 0.85rem;
            color: #15803d;
            padding: 0.35rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }
        
        .included-section li i {
            margin-top: 0.15rem;
        }
        
        /* Disclaimers */
        .disclaimer-box {
            background: #fffbeb;
            border-left: 3px solid #f59e0b;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.8rem;
            color: #92400e;
        }
        
        .disclaimer-box.airspace {
            background: #fef2f2;
            border-color: #ef4444;
            color: #991b1b;
        }
        
        /* CTA Button */
        .estimate-cta {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
        }
        
        /* Scope Message */
        .scope-message {
            background: #eff6ff;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #1e40af;
            display: none;
        }
        
        .scope-message.active {
            display: block;
        }
        
        /* Booking Form Section */
        .booking-section {
            padding: 80px 0;
            background: white;
        }
        
        .booking-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .booking-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .booking-header h2 {
            font-size: 2rem;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }
        
        .booking-header p {
            color: var(--text-muted);
        }
        
        .booking-form {
            background: var(--background-alt);
            padding: 2.5rem;
            border-radius: 16px;
        }
        
        .booking-summary {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary);
        }
        
        .booking-summary h4 {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .booking-summary .summary-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .booking-summary .summary-details {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
        
        .form-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }
        
        .form-buttons .cta-button {
            flex: 1;
            min-width: 200px;
            text-align: center;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .quote-layout {
                grid-template-columns: 1fr;
            }
            
            .estimate-panel {
                position: static;
            }
        }
        
        @media (max-width: 768px) {
            .quote-hero h1 {
                font-size: 2rem;
            }
            
            .form-grid,
            .size-options {
                grid-template-columns: 1fr;
            }
            
            .form-grid.three-col {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="../skyshield-logo-clean.png" alt="SkyShield Logo" class="nav-logo-img">
                <h3>Sky Shield</h3>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="../index.html#how-it-works" class="nav-link">How It Works</a>
                <a href="../index.html#safety-receipt" class="nav-link">Safety Receipt</a>
                <a href="../index.html#contact" class="nav-link">Get Quote</a>
                <a href="../index.html#contact" class="nav-link">Request Site Walk</a>
                <a href="our-fleet.html" class="nav-link">Our Fleet</a>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="quote-hero">
        <div class="container">
            <h1>Get Your Quote</h1>
            <p>Tell us about your event and we'll recommend the right coverage package.</p>
        </div>
    </section>

    <!-- Quote Calculator -->
    <section class="quote-content">
        <div class="container">
            <div class="quote-layout">
                <!-- Left: Inputs -->
                <div class="quote-inputs">
                    
                    <!-- REQUIRED: Event Details -->
                    <div class="quote-section">
                        <div class="section-header">
                            <i class="fas fa-calendar-alt"></i>
                            <h3>Event Details</h3>
                            <span class="badge required">Required</span>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="event-address">Event Location <span class="required-star">*</span></label>
                            <input type="text" id="event-address" placeholder="Venue address" required>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="event-city">City <span class="required-star">*</span></label>
                                <input type="text" id="event-city" required>
                            </div>
                            <div class="form-group">
                                <label for="event-state">State <span class="required-star">*</span></label>
                                <select id="event-state" required>
                                    <option value="">Select state</option>
                                    <option value="TX">Texas</option>
                                    <option value="CA">California</option>
                                    <option value="NY">New York</option>
                                    <option value="FL">Florida</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-grid three-col">
                            <div class="form-group">
                                <label for="event-date">Event Date <span class="required-star">*</span></label>
                                <input type="date" id="event-date" required>
                            </div>
                            <div class="form-group">
                                <label for="start-time">Start Time <span class="required-star">*</span></label>
                                <input type="time" id="start-time" value="10:00" required>
                            </div>
                            <div class="form-group">
                                <label for="end-time">End Time <span class="required-star">*</span></label>
                                <input type="time" id="end-time" value="18:00" required>
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="event-type">Event Type <span class="required-star">*</span></label>
                                <select id="event-type" required>
                                    <option value="corporate">Corporate Event</option>
                                    <option value="wedding">Wedding / Private Party</option>
                                    <option value="festival">Festival / Concert</option>
                                    <option value="sporting">Sporting Event</option>
                                    <option value="political">Political / Rally</option>
                                    <option value="vip">VIP / Executive Event</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="attendance">Estimated Attendance</label>
                                <input type="number" id="attendance" placeholder="e.g., 500" min="10" max="100000">
                            </div>
                        </div>
                    </div>

                    <!-- REQUIRED: Site Size -->
                    <div class="quote-section">
                        <div class="section-header">
                            <i class="fas fa-ruler-combined"></i>
                            <h3>Site Size</h3>
                            <span class="badge required">Required</span>
                        </div>
                        
                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">
                            How would you like to describe your venue size?
                        </p>
                        
                        <div class="size-options">
                            <label class="size-option active" data-type="acres">
                                <input type="radio" name="size-type" value="acres" checked>
                                <div class="option-label">Acres</div>
                            </label>
                            <label class="size-option" data-type="perimeter">
                                <input type="radio" name="size-type" value="perimeter">
                                <div class="option-label">Perimeter</div>
                            </label>
                            <label class="size-option" data-type="notsure">
                                <input type="radio" name="size-type" value="notsure">
                                <div class="option-label">Not Sure</div>
                            </label>
                        </div>
                        
                        <div class="size-input-wrapper active" id="acres-input">
                            <div class="form-group">
                                <label for="site-acres">Venue Size (acres)</label>
                                <input type="number" id="site-acres" value="5" min="0.5" max="500" step="0.5">
                                <p class="helper-text">Approximate total area to be covered</p>
                            </div>
                        </div>
                        
                        <div class="size-input-wrapper" id="perimeter-input">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="site-perimeter">Perimeter Length</label>
                                    <input type="number" id="site-perimeter" value="2640" min="100">
                                </div>
                                <div class="form-group">
                                    <label for="perimeter-unit">Unit</label>
                                    <select id="perimeter-unit">
                                        <option value="feet">Feet</option>
                                        <option value="meters">Meters</option>
                                        <option value="miles" selected>Miles</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="scope-message" id="notsure-message">
                            <i class="fas fa-info-circle"></i>
                            <strong>No problem!</strong> We'll recommend 1 team to start. During our 10-minute call, we'll confirm the exact scope and adjust if needed.
                        </div>
                    </div>

                    <!-- OPTIONAL: Additional Options -->
                    <div class="quote-section">
                        <div class="section-header">
                            <i class="fas fa-sliders-h"></i>
                            <h3>Additional Options</h3>
                            <span class="badge optional">Optional</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="risk-level">Risk Level</label>
                            <select id="risk-level">
                                <option value="auto">Let SkyShield decide (based on event type)</option>
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        
                        <div class="toggle-row">
                            <span class="toggle-label">Night operations (after sunset)</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="night-ops">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-row">
                            <span class="toggle-label">Near airport or downtown area</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="airspace-concern">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-row">
                            <span class="toggle-label">Client radio channel available</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="radio-available" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="form-grid" style="margin-top: 1rem;">
                            <div class="form-group">
                                <label for="num-days">Number of Days</label>
                                <select id="num-days">
                                    <option value="1">1 day</option>
                                    <option value="2">2 days</option>
                                    <option value="3">3 days</option>
                                    <option value="4">4+ days (custom)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="travel-miles">Distance from Austin (miles)</label>
                                <input type="number" id="travel-miles" placeholder="e.g., 30" min="0" max="500">
                                <p class="helper-text">Leave blank if in Austin area</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Estimate Display -->
                <div class="estimate-panel">
                    <div class="estimate-card">
                        <div class="estimate-header">
                            <div class="estimate-label">Your Estimate</div>
                            <div class="estimate-price" id="estimate-price">$7,500</div>
                            <div class="estimate-starting" id="estimate-starting">Starting at</div>
                        </div>
                        
                        <!-- Coverage Package -->
                        <div class="coverage-package">
                            <h4>Recommended Coverage</h4>
                            <div class="coverage-row">
                                <span class="label">Teams</span>
                                <span class="value" id="display-teams">1 team</span>
                            </div>
                            <div class="coverage-row">
                                <span class="label">Hours</span>
                                <span class="value" id="display-hours">8 hours</span>
                            </div>
                            <div class="coverage-row">
                                <span class="label">Fleet per team</span>
                                <span class="value">3× DJI Matrice 4T</span>
                            </div>
                            <div class="coverage-row">
                                <span class="label">Staff per team</span>
                                <span class="value">2 pilots + 1 ops mgr</span>
                            </div>
                        </div>
                        
                        <!-- Breakdown -->
                        <div class="breakdown-section">
                            <h4>Price Breakdown</h4>
                            <div class="breakdown-item">
                                <span class="label">Base package (8 hrs, 1 team)</span>
                                <span class="value">$7,500</span>
                            </div>
                            <div class="breakdown-item" id="row-extra-hours" style="display: none;">
                                <span class="label" id="label-extra-hours">Additional hours</span>
                                <span class="value" id="value-extra-hours">+$0</span>
                            </div>
                            <div class="breakdown-item" id="row-extra-teams" style="display: none;">
                                <span class="label" id="label-extra-teams">Additional teams</span>
                                <span class="value" id="value-extra-teams">+$0</span>
                            </div>
                            <div class="breakdown-item" id="row-travel" style="display: none;">
                                <span class="label">Travel / mobilization</span>
                                <span class="value" id="value-travel">+$0</span>
                            </div>
                            <div class="breakdown-item" id="row-night" style="display: none;">
                                <span class="label">Night operations</span>
                                <span class="value" id="value-night">+$0</span>
                            </div>
                            <div class="breakdown-item" id="row-deposit" style="display: none;">
                                <span class="label">Deposit (50%)</span>
                                <span class="value" id="value-deposit">$3,750</span>
                            </div>
                        </div>
                        
                        <!-- Included -->
                        <div class="included-section">
                            <h4>Always Included</h4>
                            <ul id="included-list">
                                <li><i class="fas fa-check"></i> Live overwatch + radio callouts</li>
                                <li><i class="fas fa-check"></i> Incident Log with timestamps</li>
                                <li><i class="fas fa-check"></i> Safety Receipt PDF within 24 hrs</li>
                                <li><i class="fas fa-check"></i> Privacy: no biometric ID or ALPR</li>
                            </ul>
                        </div>
                        
                        <!-- Disclaimers -->
                        <div class="disclaimer-box" id="disclaimer-standard">
                            Final quote depends on site layout, airspace approvals, and operational constraints (Part 107/VLOS/venue permissions).
                        </div>
                        
                        <div class="disclaimer-box airspace" id="disclaimer-airspace" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            This location may require airspace authorization. We'll confirm feasibility before finalizing.
                        </div>
                        
                        <a href="#booking-form" class="cta-button primary estimate-cta">
                            Request Booking
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Form -->
    <section class="booking-section" id="booking-form">
        <div class="container">
            <div class="booking-container">
                <div class="booking-header">
                    <h2>Request Your Booking</h2>
                    <p>We'll confirm details and airspace, then send a final quote within 24 hours.</p>
                </div>
                
                <form class="booking-form" id="bookingForm">
                    <div class="booking-summary">
                        <h4>Your Estimate Summary</h4>
                        <div class="summary-price" id="form-price">Starting at $7,500</div>
                        <div class="summary-details" id="form-details">1 team, 8 hours</div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="contact-name">Your Name <span class="required-star">*</span></label>
                            <input type="text" id="contact-name" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-email">Email <span class="required-star">*</span></label>
                            <input type="email" id="contact-email" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="contact-phone">Phone <span class="required-star">*</span></label>
                            <input type="tel" id="contact-phone" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-org">Organization</label>
                            <input type="text" id="contact-org">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="contact-notes">Additional Notes</label>
                        <textarea id="contact-notes" rows="3" placeholder="Venue name, special requirements, questions..."></textarea>
                    </div>
                    
                    <!-- Hidden fields for payload -->
                    <input type="hidden" id="payload-estimate" name="estimate">
                    <input type="hidden" id="payload-teams" name="teams">
                    <input type="hidden" id="payload-hours" name="hours">
                    <input type="hidden" id="payload-location" name="location">
                    <input type="hidden" id="payload-date" name="date">
                    <input type="hidden" id="payload-breakdown" name="breakdown">
                    
                    <div class="form-buttons">
                        <button type="submit" class="cta-button primary">
                            <i class="fas fa-paper-plane"></i> Submit Booking Request
                        </button>
                        <a href="https://calendly.com" target="_blank" class="cta-button secondary">
                            <i class="fas fa-phone"></i> Book 10-min Call
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>Sky Shield LLC • Austin, TX • Not for emergency response. Operations comply with FAA Part 107.</p>
                <div class="footer-links">
                    <a href="pilot-application.html">Join Our Team</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script>
        // ============================================
        // QUOTE CALCULATOR LOGIC
        // ============================================
        
        const CONFIG = QUOTE_CONFIG;
        
        // State
        let state = {
            sizeType: 'acres',
            acres: 5,
            perimeter: 0.5, // miles
            hours: 8,
            teams: 1,
            riskLevel: 'auto',
            eventType: 'corporate',
            nightOps: false,
            airspaceConcern: false,
            days: 1,
            travelMiles: 0
        };

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            initSizeOptions();
            initTimeCalculation();
            initEventListeners();
            calculateEstimate();
        });

        function initSizeOptions() {
            document.querySelectorAll('.size-option').forEach(option => {
                option.addEventListener('click', function() {
                    const type = this.dataset.type;
                    
                    // Update active state
                    document.querySelectorAll('.size-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show/hide input wrappers
                    document.querySelectorAll('.size-input-wrapper').forEach(w => w.classList.remove('active'));
                    document.getElementById('notsure-message').classList.remove('active');
                    
                    if (type === 'acres') {
                        document.getElementById('acres-input').classList.add('active');
                    } else if (type === 'perimeter') {
                        document.getElementById('perimeter-input').classList.add('active');
                    } else if (type === 'notsure') {
                        document.getElementById('notsure-message').classList.add('active');
                    }
                    
                    state.sizeType = type;
                    calculateEstimate();
                });
            });
        }

        function initTimeCalculation() {
            const startTime = document.getElementById('start-time');
            const endTime = document.getElementById('end-time');
            
            function updateHours() {
                const start = startTime.value.split(':').map(Number);
                const end = endTime.value.split(':').map(Number);
                
                let hours = (end[0] + end[1]/60) - (start[0] + start[1]/60);
                if (hours < 0) hours += 24; // Overnight event
                
                state.hours = Math.max(CONFIG.limits.min_hours, Math.round(hours));
                calculateEstimate();
            }
            
            startTime.addEventListener('change', updateHours);
            endTime.addEventListener('change', updateHours);
        }

        function initEventListeners() {
            // Acres input
            document.getElementById('site-acres').addEventListener('input', function() {
                state.acres = parseFloat(this.value) || 0;
                calculateEstimate();
            });
            
            // Perimeter input
            document.getElementById('site-perimeter').addEventListener('input', function() {
                updatePerimeterMiles();
                calculateEstimate();
            });
            
            document.getElementById('perimeter-unit').addEventListener('change', function() {
                updatePerimeterMiles();
                calculateEstimate();
            });
            
            // Event type
            document.getElementById('event-type').addEventListener('change', function() {
                state.eventType = this.value;
                calculateEstimate();
            });
            
            // Risk level
            document.getElementById('risk-level').addEventListener('change', function() {
                state.riskLevel = this.value;
                calculateEstimate();
            });
            
            // Night ops
            document.getElementById('night-ops').addEventListener('change', function() {
                state.nightOps = this.checked;
                calculateEstimate();
            });
            
            // Airspace concern
            document.getElementById('airspace-concern').addEventListener('change', function() {
                state.airspaceConcern = this.checked;
                document.getElementById('disclaimer-airspace').style.display = this.checked ? 'block' : 'none';
            });
            
            // Days
            document.getElementById('num-days').addEventListener('change', function() {
                state.days = parseInt(this.value) || 1;
                calculateEstimate();
            });
            
            // Travel
            document.getElementById('travel-miles').addEventListener('input', function() {
                state.travelMiles = parseFloat(this.value) || 0;
                calculateEstimate();
            });
            
            // Form submission
            document.getElementById('bookingForm').addEventListener('submit', handleFormSubmit);
        }

        function updatePerimeterMiles() {
            const value = parseFloat(document.getElementById('site-perimeter').value) || 0;
            const unit = document.getElementById('perimeter-unit').value;
            
            // Convert to miles
            if (unit === 'feet') {
                state.perimeter = value / 5280;
            } else if (unit === 'meters') {
                state.perimeter = value / 1609.34;
            } else {
                state.perimeter = value;
            }
        }

        // ============================================
        // TEAM RECOMMENDATION LOGIC
        // ============================================
        function calculateTeams() {
            // If "not sure", default to 1 team
            if (state.sizeType === 'notsure') {
                return CONFIG.team_heuristic.not_sure_default;
            }
            
            // Determine risk level
            let risk = state.riskLevel;
            if (risk === 'auto') {
                risk = CONFIG.event_types[state.eventType]?.risk || 'medium';
            }
            
            let teams = 1;
            
            if (state.sizeType === 'acres' && state.acres > 0) {
                const threshold = CONFIG.team_heuristic.by_acres[risk] || 4;
                teams = Math.ceil(state.acres / threshold);
            } else if (state.sizeType === 'perimeter' && state.perimeter > 0) {
                const threshold = CONFIG.team_heuristic.by_perimeter_miles[risk] || 1.0;
                teams = Math.ceil(state.perimeter / threshold);
            }
            
            return Math.max(1, teams);
        }

        // ============================================
        // PRICE COMPUTATION
        // ============================================
        function calculateEstimate() {
            const teams = calculateTeams();
            state.teams = teams;
            
            const hours = state.hours;
            const days = state.days;
            
            // Base calculation
            const basePrice = CONFIG.base.price;
            const extraHours = Math.max(0, hours - CONFIG.base.hours);
            const extraTeams = Math.max(0, teams - CONFIG.base.teams);
            
            // Calculate line items
            const extraHoursPrice = extraHours * CONFIG.extra_hour_price * teams;
            const extraTeamsPrice = extraTeams * CONFIG.extra_team_price;
            
            // Travel fee
            let travelFee = 0;
            if (state.travelMiles > CONFIG.travel.included_miles) {
                const extraMiles = state.travelMiles - CONFIG.travel.included_miles;
                travelFee = Math.max(CONFIG.travel.minimum, extraMiles * CONFIG.travel.per_mile);
            }
            
            // Night ops fee
            const nightFee = state.nightOps ? CONFIG.night_ops_fee : 0;
            
            // Total
            let total = basePrice + extraHoursPrice + extraTeamsPrice + travelFee + nightFee;
            total = total * days;
            
            // Update display
            updateDisplay(teams, hours, total, {
                base: basePrice,
                extraHours: extraHoursPrice,
                extraTeams: extraTeamsPrice,
                travel: travelFee,
                night: nightFee,
                days: days
            });
            
            return total;
        }

        function updateDisplay(teams, hours, total, breakdown) {
            // Main estimate
            document.getElementById('estimate-price').textContent = '$' + total.toLocaleString();
            
            // Coverage
            document.getElementById('display-teams').textContent = teams === 1 ? '1 team' : teams + ' teams';
            document.getElementById('display-hours').textContent = hours + ' hours';
            
            // Breakdown rows
            const rowExtraHours = document.getElementById('row-extra-hours');
            if (breakdown.extraHours > 0) {
                rowExtraHours.style.display = 'flex';
                document.getElementById('label-extra-hours').textContent = 
                    `+${hours - CONFIG.base.hours} hours × ${teams} team${teams > 1 ? 's' : ''}`;
                document.getElementById('value-extra-hours').textContent = '+$' + breakdown.extraHours.toLocaleString();
            } else {
                rowExtraHours.style.display = 'none';
            }
            
            const rowExtraTeams = document.getElementById('row-extra-teams');
            if (breakdown.extraTeams > 0) {
                rowExtraTeams.style.display = 'flex';
                document.getElementById('label-extra-teams').textContent = 
                    `+${teams - CONFIG.base.teams} additional team${teams - CONFIG.base.teams > 1 ? 's' : ''}`;
                document.getElementById('value-extra-teams').textContent = '+$' + breakdown.extraTeams.toLocaleString();
            } else {
                rowExtraTeams.style.display = 'none';
            }
            
            const rowTravel = document.getElementById('row-travel');
            if (breakdown.travel > 0) {
                rowTravel.style.display = 'flex';
                document.getElementById('value-travel').textContent = '+$' + breakdown.travel.toLocaleString();
            } else {
                rowTravel.style.display = 'none';
            }
            
            const rowNight = document.getElementById('row-night');
            if (breakdown.night > 0) {
                rowNight.style.display = 'flex';
                document.getElementById('value-night').textContent = '+$' + breakdown.night.toLocaleString();
            } else {
                rowNight.style.display = 'none';
            }
            
            // Deposit row
            if (CONFIG.deposit.enabled) {
                const deposit = total * (CONFIG.deposit.percent / 100);
                document.getElementById('row-deposit').style.display = 'flex';
                document.getElementById('value-deposit').textContent = '$' + deposit.toLocaleString();
            }
            
            // Form summary
            document.getElementById('form-price').textContent = 'Starting at $' + total.toLocaleString();
            document.getElementById('form-details').textContent = 
                `${teams} team${teams > 1 ? 's' : ''}, ${hours} hours` + 
                (breakdown.days > 1 ? ` × ${breakdown.days} days` : '');
            
            // Update hidden fields
            document.getElementById('payload-estimate').value = total;
            document.getElementById('payload-teams').value = teams;
            document.getElementById('payload-hours').value = hours;
        }

        // ============================================
        // FORM SUBMISSION
        // ============================================
        function handleFormSubmit(e) {
            e.preventDefault();
            
            // Gather all data
            const formData = {
                // Contact
                name: document.getElementById('contact-name').value,
                email: document.getElementById('contact-email').value,
                phone: document.getElementById('contact-phone').value,
                org: document.getElementById('contact-org').value,
                
                // Event
                date: document.getElementById('event-date').value,
                startTime: document.getElementById('start-time').value,
                endTime: document.getElementById('end-time').value,
                eventType: document.getElementById('event-type').value,
                attendance: document.getElementById('attendance').value,
                
                // Location
                address: document.getElementById('event-address').value,
                city: document.getElementById('event-city').value,
                state: document.getElementById('event-state').value,
                
                // Scope
                sizeType: state.sizeType,
                acres: state.acres,
                perimeter: state.perimeter,
                riskLevel: state.riskLevel,
                nightOps: state.nightOps,
                days: state.days,
                
                // Calculator result
                teams: state.teams,
                hours: state.hours,
                estimate: document.getElementById('estimate-price').textContent,
                
                // Notes
                notes: document.getElementById('contact-notes').value
            };
            
            // Build email
            const subject = `Booking Request - ${formData.name} - ${formData.estimate}`;
            const body = `NEW BOOKING REQUEST

CONTACT
Name: ${formData.name}
Email: ${formData.email}
Phone: ${formData.phone}
Organization: ${formData.org || 'Not specified'}

EVENT DETAILS
Date: ${formData.date}
Time: ${formData.startTime} - ${formData.endTime}
Type: ${formData.eventType}
Attendance: ${formData.attendance || 'Not specified'}

LOCATION
Address: ${formData.address}
City/State: ${formData.city}, ${formData.state}

SCOPE
Site Size: ${formData.sizeType === 'acres' ? formData.acres + ' acres' : formData.sizeType === 'perimeter' ? formData.perimeter.toFixed(2) + ' miles perimeter' : 'Not sure (confirm on call)'}
Risk Level: ${formData.riskLevel}
Night Ops: ${formData.nightOps ? 'Yes' : 'No'}
Days: ${formData.days}

ESTIMATE
Teams: ${formData.teams}
Hours: ${formData.hours}
Price: ${formData.estimate}

NOTES
${formData.notes || 'None'}

---
Submitted via Sky Shield Quote Calculator`;

            const mailtoLink = `mailto:${CONFIG.quote_email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink);
            
            alert('Thank you! Your email client should open with your booking request. Please send the email to complete your submission.');
        }
    </script>
</body>
</html>
